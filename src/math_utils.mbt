///| 数学工具函数

///| 计算自然对数（使用泰勒级数近似）
pub fn log(x : Double) -> Double {
  if x <= 0.0 {
    return -1000000.0  // 负无穷近似
  }
  
  // 使用换底公式和简单近似
  // ln(x) ≈ 2 * ((x-1)/(x+1) + 1/3*((x-1)/(x+1))^3 + ...)
  let y = (x - 1.0) / (x + 1.0)
  let y2 = y * y
  let y3 = y2 * y
  let y5 = y3 * y2
  let y7 = y5 * y2
  
  2.0 * (y + y3 / 3.0 + y5 / 5.0 + y7 / 7.0)
}

